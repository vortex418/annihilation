<!DOCTYPE html>
<html> 
	<head>
		<title>Annihilation - Home</title>
		<meta charset="UTF-8">
		<meta name="name" content="Annihilation">
		<meta name="description" content="Welcome to Annihilation! Annihilation is a free, online space game. It is the theme and content of xcraft, but in the liniear form and progression of island clash. Play it now and join the Annihilation Discord Server (https://discord.gg/7mQsXb3EdY)!">
		<meta name="keywords" content="Annihilation, Space, Battle, Game, Vortex">
		<meta name="author" content="Vortex418">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="assets/icon.png" rel="icon" type="image/png">
		<link href="styles.css" rel="stylesheet">
		<link rel="stylesheet" href="/annihilation/libraries/font-awesome-4.css">
		<style>.fa{color:rgb(255,255,255);text-shadow:0 0 7px hsla(200,80%,80%,1)}</style>
	</head>
	<body id="body"><center>
		<br><br><br>
		<h1 class="title" style="font-family:azonix,sans-serif">Annihilation</h1>
		<button id="play-latest" style="padding: 15px 50px;font-size: 25px">PLAY NOW</button>
		<br>
		<button id="play-beta">Play the Beta</button>
		<button id="play-custom">Play Custom Game</button>
		<i class="fa fa-cog clickable" aria-hidden="true" id="gear" style="position:fixed;left:94%;top:5%;font-size:40px"></i>
		<div id="settings" style="position:absolute;left:85%;top:2.5%;width:12.5%;height:30%;display:none;" class="overlay" >
			<p>You're signed in as:</p><p id="settings-label">[username]</p>
			<button id="settings-change" style="position:absolute;left:5%;top:50%;width:90%;height:16.6%">Change</button>
			<button id="settings-logout" style="position:absolute;left:5%;top:80%;width:90%;height:16.6%">Logout</button>
		</div>
		<div id="custom" style="position:fixed;left:30%;top:25%;width:40%;height:40%;display:none;">
			<i id="custom-x" class="fa fa-times clickable" style="position:absolute;left:90%;top:5%;font-size:25px"></i>
			<input id="custom-border-width" style="position:absolute;left:35%;top:10%;width:50%;height:8%">
			<input id="custom-border-height" style="position:absolute;left:35%;top:20%;width:50%;height:8%">
			<input id="custom-radius-min" style="position:absolute;left:35%;top:30%;width:50%;height:8%">
			<input id="custom-radius-max" style="position:absolute;left:35%;top:40%;width:50%;height:8%">
			<input id="custom-planets" style="position:absolute;left:35%;top:50%;width:50%;height:8%">
			<input id="custom-stars" style="position:absolute;left:35%;top:60%;width:50%;height:8%">
			<label for="custom-border-width" style="position:absolute;left:5%;top:14%;">Border Width: </label>
			<label for="custom-border-height" style="position:absolute;left:5%;top:24%;">Border Width: </label>
			<label for="custom-radius-min" style="position:absolute;left:5%;top:34%;">Minimum Radius: </label>
			<label for="custom-radius-max" style="position:absolute;left:5%;top:44%;">Maximum Radius: </label>
			<label for="custom-planets" style="position:absolute;left:5%;top:54%;">Planets: </label>
			<label for="custom-stars" style="position:absolute;left:5%;top:64%;">Stars: </label>
			<button id="custom-button" style="position:absolute;left:30%;width:40%;top:80%;height:15%">Play</button>
		</div>
		<div id="signin" style="position:absolute;left:35%;top:20%;width:30%;height:60%;display:none;" class="overlay" >
			<i id="signin-x" class="fa fa-times clickable" style="position:absolute;left:90%;top:5%;font-size:25px"></i>
			<h3 style="position:absolute;left:25%;top:0%;width:50%;">Sign In</h3>
			<input id="signin-username" type="text" style="position:absolute;left:10%;top:40%;width:80%;height:10%;">
			<input id="signin-password" type="password" style="position:absolute;left:10%;top:60%;width:80%;height:10%">
			<button id="signin-submit" style="position:absolute;left:25%;top:80%;width:50%;height:8%">Sign In</button>
			<button id="signin-button" style="position:absolute;left:30%;top:90%;width:40%;height:6%">Sign Up</button>
		</div>
		<div id="signup" style="position:absolute;left:35%;top:20%;width:30%;height:60%;display:none;" class="overlay" >
			<i id="signup-x" class="fa fa-times clickable" style="position:absolute;left:90%;top:5%;font-size:25px"></i>
			<h3 style="position:absolute;left:25%;top:0%;width:50%;">Sign Up</h3>
			<input id="signup-username" name="username" style="position:absolute;left:10%;top:40%;width:80%;height:10%;">
			<input id="signup-password" name="password" type="password" style="position:absolute;left:10%;top:60%;width:80%;height:10%">
			<button id="signup-submit" style="position:absolute;left:22.5%;top:80%;width:55%;height:8%">Create Account</button>
			<button id="signup-button" style="position:absolute;left:30%;top:90%;width:40%;height:6%">Sign In</button>
		</div>
		<br><br><br>
		<h3 id="about">About</h3>
		<p>Annhilation is a online space battle simultor. <br> It is the theme and content of xcraft, <br> but in the liniear form and progression of island clash. <br><br>The Annihilation website was first released on Novermber 23, 2020</p>
	</center></body>
	<script src="/annihilation/libraries/jquery.js"></script>
	<script>
		var user = {name:"",active:false,signin:{name:"",pass:""},signup:{name:"",pass:""}};
		var custom = {borders:[1024,576],radius:[25.75],planets:65,stars:128};
		$("#signin-username").on("change", function(){user.signin.name = $("#signin-username").val()});
		$("#signin-password").on("change", function(){user.signin.pass = $("#signin-password").val()});
		$("#signup-username").on("change", function(){user.signup.name = $("#signup-username").val()});
		$("#signup-password").on("change", function(){user.signup.pass = $("#signup-password").val()});
		$("#custom-border-width").on("change",function(){custom.borders[0] = $("#custom-border-width").val()});
		$("#custom-border-height").on("change",function(){custom.borders[1] = $("#custom-border-height").val()});
		$("#custom-radius-min").on("change",function(){custom.radius[0] = $("#custom-radius-min").val()});
		$("#custom-radis-max").on("change",function(){custom.radius[1] = $("#custom-radius-max").val()});
		$("#custom-planets").on("change",function(){custom.planets = $("#custom-planets").val()});
		$("#custom-stars").on("change",function(){custom.stars = $("#custom-stars").val()});
	$("#play-latest").on("click", function(){open("/annihilation/play/0.4.4.html","newwindow","width=1024,height=576")});
	$("#play-beta").on("click", function(){open("/annihilation/play/beta.html","newwindow","width=1024,height=576")});
		$("#play-custom").on("click", function(){
			$("#custom").show();
		});
		$("#gear").on("click", function(){if(user.active == true){$("#settings").show()}else{$("#signin").show()}});
		$("#signin-button").on("click", function(){$("#signup").show()});
		$("#signup-button").on("click", function(){$("#signup").hide()});
		$("#custom-x").on("click",function(){$("#custom").hide()});
		$("#signin-x").on("click",function(){$("#signin").hide()});
		$("#signup-x").on("click",function(){$("#signin").hide();$("#signup").hide()});
		$("#custom-button").on("click",function(){open("/annihilation/play/0.4.4.html?worldgen="+JSON.stringify(custom),"newwindow","width=1024,height=576")});
		$("#settings-change").on("click", function(){alert("No settings to change yet!")});
		$("#settings-logout").on("click", function(){
			user.name = null;user.active = false;$("#signin-username").val(null);$("#signin-password").val(null);
			$("#signup-username").val(null);$("#signup-password").val(null);$("#settings").hide()
		});
		$("#signup-submit").on("click",function(x){
		    x.preventDefault();
			$.get("userData/"+user.signup.name+"/key",function(key){
				alert("That account already exists")
			})
			.fail(function(error){
				if(error.status == 404){
					if(user.signup.name != null && user.signup.name != undefined && user.signup.name != "" && user.signup.pass != null && user.signup.pass != undefined && user.signup.pass != ""){
						$.post("/annihilation/index.php","submit=true&=name"+user.signup.name+"&password="+user.signup.pass) 
					}
				}
				else if(user.signup.name == "" || user.signup.pass == ""){alert("You must enter a username and password")}
				else {console.error("Unexpected error signing up.\nRequest state: "+error.readyState+"\nstatus: "+error.status+" ("+error.statusText+")")}
			});
		});
		$("#signin-submit").on("click", function(){
			$.get("userData/"+user.signin.name+"/key",function(key){
  				if(user.signin.pass == key){user.active = true;user.name = user.signin.name;$("#signin").hide();$("#settings-label").text(user.name)}
				else {alert("Incorrect Password")}
			}).fail(function(error){
				if(error.status == 404){
					console.warn("Account \""+user.signin.name+"\" Doesn't exist");
					alert("That account doesn't exist!")
				} 
				else {console.error("Unexpected error getting user cedentials.\nRequest state: "+error.readyState+"\nstatus: "+error.status+" ("+error.statusText+")")}
			});
		});
	</script>
</html>